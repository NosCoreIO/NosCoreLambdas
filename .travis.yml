language: csharp
mono: none
sudo: required
dist: xenial
addons:
    snaps:
      - name: dotnet-sdk
        confinement: classic
        channel: 3.1/stable
solution: NosCore-Discord.sln
branches:
  only: master
install:
  - export PATH="$PATH:/home/travis/.dotnet/tools"
  - export PATH="$PATH:$HOME/.local/bin"
  - sudo snap alias dotnet-sdk.dotnet dotnet
  - dotnet tool install -g Amazon.Lambda.Tools
before_script:
  - chmod -R a+x scripts
  - export PATH="$PATH:$HOME/.dotnet/tools"
script:
  - dotnet --version
  - dotnet restore
  - dotnet build
  - ./scripts/publish.sh
env:
  global:
  - AWS_DEFAULT_REGION=us-west-2
  
